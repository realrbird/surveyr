% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utilities.R
\name{svy_check}
\alias{svy_check}
\title{Pre-flight Raking Check}
\usage{
svy_check(data, target_list, verbose = TRUE)
}
\arguments{
\item{data}{A data frame or tibble containing the survey variables.}

\item{target_list}{A named list of tibbles containing the population targets.}

\item{verbose}{Logical. If \code{TRUE}, prints the results of each check
with color-coded PASS/FAIL/WARN messages. Defaults to \code{TRUE}.}
}
\value{
A single logical value: \code{TRUE} if all checks passed (only warnings occurred),
\code{FALSE} if any check failed (an error occurred).
}
\description{
Performs essential validation checks on survey data and targets
before running raking (\code{svy_rake}). Checks include factor alignment,
cell counts, missing values, and high correlation between raking variables.
}
\details{
This function is designed to prevent failures in \code{svy_rake()}.
\itemize{
\item \strong{FAIL (Red)}: Indicates a fatal error (e.g., mismatched factor levels, missing columns) that will stop raking.
\item \strong{WARN (Yellow)}: Indicates a condition that may cause instability (e.g., low cell counts, high correlation) but allows raking to proceed.
\item \strong{PASS (Green)}: Indicates the condition is met.
}

\strong{High Correlation Check (Warning):} Issues a warning if the absolute correlation
between any pair of raking variables (when converted to dummy variables) is greater
than \code{0.8}. Highly correlated variables can lead to matrix singularity and unstable weights.
}
\examples{
# Requires devtools::load_all() and crayon package
if (requireNamespace("crayon", quietly = TRUE)) {
  data("survey_df")
  data("target_list")

  # All checks should pass or warn on correlation
  svy_check(survey_df, target_list)

  # Example of a FAIL case (missing data)
  # df_bad <- survey_df
  # df_bad$age_group[1] <- NA
  # svy_check(df_bad, target_list)
}

}
